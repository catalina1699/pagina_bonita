<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <!-- CSS de Bootstrap-->
       <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
       <!-- Vamos a buscar la biblioteca Chart.js-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js" integrity="sha512-QSkVNOCYLtj73J4hbmVoOV6KVZuMluZlioC+trLpewV8qMjsWqlIQvkn1KGX2StWvPMdWGBqim1xlC8krl1EKQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <style>
            @import url("https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,300;0,400;0,600;1,400&display=swap");
            :root {
                --bs-body-font-family: "Josefin sans", sans-serif;
                --bs-body-color: #f7f7e6;
                --bs-body-bg: #030114;
            }
            body {
                background-image: url(https://picsum.photos/id/238/2560/1440/?blur=6);
                background-repeat: no-repeat;
                background-position: center bottom;
                background-size: auto;
            }
            </style>
        <title>Esto es un ejemplo</title>
    </head>
    <body>
        <header class="titular">
            <div class="container h-100">
                <div class="row h-100">
                    <div class="col-md-6 mx-auto text-center align-self-end">
                        <h2 class="fs-6">TONGA ERUPTION</h2>
                        <h1>The perfect storm</h1>
                        <h3 class="fs-5 mb-5">Data shows why the volcanic lightning storm from the Tonga eruption was unlike anything on record.</h3>
                        <p class="m-0">Por <a href="#">Nombre Apellido</a></p>
                        <p class="small">PUBLICADO EL 12 DE MAYO, 2022</p>
                    </div>
                </div>
            </div>
        </header>
        <main>
            <div class="container py-5">
                <div class="row">
                    <div class="col-md-6 mx-auto">

                        <p class="primero">Volcanic eruptions tend to evoke images of flowing molten lava and giant ash plumes, but when an underwater volcano off Tonga began a major eruption on Jan. 13, it was accompanied by one of the largest volcanic lightning events ever recorded</p>

                        <p>The surrounding islands in the Tonga archipelago in the South Pacific Ocean were completely engulfed in lightning at various stages of the eruption which lasted days.</p>

                        <p>“I can’t imagine what the people on the islands would have been going through, with a huge ash cloud overhead, a tsunami flooding everything they own, and cloud-to-ground lightning coming down around them. It must have felt apocalyptic.” said Chris Vagasky, a meteorologist at Vaisala, a Finland-based environmental technology company.</p>

                        <p>The Hunga Tonga-Hunga Ha'apai volcanic island lies about 65 km (40 miles) north of Nuku'alofa, the capital of Tonga. Scientists said the volcano – which last experienced a major eruption in 2014 – had been puffing away for about a month before a series of blasts began on Jan. 13. Rising magma, superheated to around 1,000 degrees Celsius (1,832 Fahrenheit), then met with 20 degree (68 Fahrenheit) seawater on Jan. 15, causing an instantaneous and massive explosion.</p>

                        <p>Scientists are still studying the behaviour of the lightning. “One of the things that I’m really interested in looking at is the wave pattern in the lightning. As the eruption plume hit the stratosphere and spread outward, it appears to have created waves in the atmosphere,” said Vagasky.</p>

                        <p>Reuters used data from a ground-based global lightning detection network owned and operated by Vaisala, dubbed GLD360, to visualize the lightning activity during the eruption. <em>Los párrafos ofrecen una introducción al tema. Después de la introducción, lo lógico debería ser incluir un gráfico.</em></p>

                    </div>
                    <div class="col-md-10 mx-auto my-5">

                        <canvas id="miGrafico" width="400" height="200"></canvas>

                    </div>
                    <div class="col-md-6 mx-auto">

                        <p><em>Ahora se puede complementar la lectura del gráfico de arriba y buscar una conexión con que sigue abajo</em>. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris molestie metus in mi pellentesque, eu malesuada diam ultricies. Mauris ultrices, ligula nec vulputate bibendum, nisi neque ultricies sem, eget volutpat magna nulla quis libero. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Praesent nec est ex. Nulla nunc elit, mattis vel justo ac, iaculis interdum tellus.</p>

                    </div>
                    <div class="col-md-10 mx-auto my-5">

                        <div class="row row-cols-2 row-cols-sm-3 row-cols-md-4 row-cols-lg-5 row-cols-xl-6 g-3 text-center" id="aqui"></div>

                    </div>
                    <div class="col-md-6 mx-auto">

                        <p><em>Este último párrafo debe ser el cierre de lo presentado</em>. Mauris ultrices, ligula nec vulputate bibendum, nisi neque ultricies sem, eget volutpat magna nulla quis libero. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Praesent nec est ex. Nulla nunc elit, mattis vel justo ac, iaculis interdum tellus. Praesent id orci leo. Phasellus eleifend tellus cursus enim imperdiet, ullamcorper ullamcorper augue volutpat. Sed at mi in magna imperdiet accumsan. Aenean cursus velit urna, lacinia hendrerit turpis congue vitae. Cras non tortor vestibulum, efficitur est vitae, posuere justo.</p>
                        
                        <p class="small my-5">Este párrafo más pequeño debería entregar información adicional: Que se trata de un trabajo para el electivo de <a href="https://github.com/profesorfaco/front-end">Introducción al Desarrollo Front End con HTML, CSS y JavaScript</a>; que el trabajo está "inspirado" en <a href="https://graphics.reuters.com/TONGA-VOLCANO/LIGHTNING/zgpomjdbypd/">Analysing the volcanic lightning from the Tonga eruption</a>, que originalmente fue desarrollado para <a href="https://graphics.reuters.com/">Reuters Graphics</a> por Manas Sharma y Simon Scarr; que el trabajo se resuelve con <a href="https://getbootstrap.com/">Bootstrap</a> y <a href="https://www.chartjs.org/">Charts.js</a>, además de consultas a un <a href="https://raw.githubusercontent.com/MinCiencia/Datos-COVID19/master/output/producto5/TotalesNacionales.csv">CSV</a> y un <a href="https://digimon-api.vercel.app/api/digimon">JSON</a>; etc.</p>

                    </div>
                </div>
            </div>
        </main>
        <footer class="bg-cierre">
            <div class="container">
                <div class="row py-3">
                    <div class="col text-center"><small>Nombre Apellido | 12 de mayo, 2022</small></div>
                </div>
            </div>
        </footer>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js" integrity="sha512-QSkVNOCYLtj73J4hbmVoOV6KVZuMluZlioC+trLpewV8qMjsWqlIQvkn1KGX2StWvPMdWGBqim1xlC8krl1EKQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!-- Un gran script, que contiene una función asincrónica para ir a buscar un JSON con -->
        <script>
            async function visualizacion() {
                //el fetch
                const consulta = await fetch("https://raw.githubusercontent.com/catalina1699/json_clase8/main/datos.json");
                const data = await consulta.json();
                //algunas variables para calcular

                var lasMujeres = 0;
                var losHombres = 0;
                //Grupos atacados
                var lesLGBT = 0;
                var lesJudios = 0;
                var lesAfroamericanos = 0;
                var lesAapi = 0;
                var lesMusulmanes = 0;
                var lesMujeres = 0;
                var lesBlancos = 0;
                var lesOtres = 0;
                //grupos etarios
                var menorDeEdad = 0;
                var veinteAnos = 0;
                var treintaAnos = 0;
                var cuarentaAnos = 0;
                var cincuentaAnos = 0;
                var sesentaAnos = 0;
                var setentaAnos = 0;
                //etnias atacadores
                var blancx = 0;
                var negrx = 0;
                var latinx = 0;
                var asiaticx = 0;

                //consultando en cada elemento del arreglo
                data.forEach((d) => {
                    //genero
                    if (d.Gender == "male") {
                        losHombres = losHombres + 1;
                    } else {
                        lasMujeres = lasMujeres + 1;
                    }
                    //grupos atacados
                    if (d.BiasMotivation == "ANTIASIAN") {
                        lesAapi = lesAapi + 1;
                    } else if (d.BiasMotivation == "ANTIBLACK") {
                        lesAfroamericanos = lesAfroamericanos + 1;
                    } else if (d.BiasMotivation == "ANTIFEMALE") {
                        lesMujeres = lesMujeres + 1;
                    } else if (d.BiasMotivation == "ANTIMUSLIM") {
                        lesMusulmanes = lesMusulmanes + 1;
                    } else if (d.BiasMotivation == "ANTIJEWISH") {
                        lesJudios = lesJudios + 1;
                    } else if (d.BiasMotivation == "ANTIMALE_HOMOSEXUAL") {
                        lesLGBT = lesLGBT + 1;
                    } else if (d.BiasMotivation == "ANTI_LGBT") {
                        lesLGBT = lesLGBT + 1;
                    } else if (d.BiasMotivation == "ANTITRANSGENDER") {
                        lesLGBT = lesLGBT + 1;
                    } else if (d.BiasMotivation == "ANTIWHITE") {
                        lesBlancos = lesBlancos + 1;
                    } else {
                        lesOtres = lesOtres + 1;
                    }
                    //grupos atacadores edad
                    if (d.AgeGroup == "10_20") {
                        menorDeEdad = menorDeEdad + 1;
                    } else if (d.AgeGroup == "20_30") {
                        veinteAnos = veinteAnos + 1;
                    } else if (d.AgeGroup == "30_30") {
                        treintaAnos = treintaAnos + 1;
                    } else if (d.AgeGroup == "30_40") {
                        treintaAnos = treintaAnos + 1;
                    } else if (d.AgeGroup == "40_40") {
                        cuarentaAnos = cuarentaAnos + 1;
                    } else if (d.AgeGroup == "40_50") {
                        cuarentaAnos = cuarentaAnos + 1;
                    } else if (d.AgeGroup == "50_50") {
                        cincuentaAnos = cincuentaAnos + 1;
                    } else if (d.AgeGroup == "50_60") {
                        cincuentaAnos = cincuentaAnos + 1;
                    } else if (d.AgeGroup == "60_60") {
                        sesentaAnos = sesentaAnos + 1;
                    } else if (d.AgeGroup == "60_70") {
                        sesentaAnos = sesentaAnos + 1;
                    } else {
                        setentaAnos = setentaAnos + 1;
                    }
                    //atacadores etnia
                    if (d.Race == "WHITE") {
                        blancx = blancx + 1;
                    } else if (d.Race == "BLACK") {
                        negrx = negrx + 1;
                    } else if (d.Race == "WHITE_HISPANIC") {
                        latinx = latinx + 1;
                    } else if (d.Race == "BLACK_HISPANIC") {
                        latinx = latinx + 1;
                    } else if (d.Race == "ASIAN_PACIFIC_ISLANDER") {
                        asiaticx = asiaticx + 1;
                    }
                });
                //gráficar
                //poblacion nueva york
                new Chart(document.getElementById("primerCan").getContext("2d"), {
                    type: "pie",
                    data: {
                        labels: ["blanco", "latino", "afroamericano", "asiatico", "nativo americano", "dos o mas grupos"],
                        datasets: [{ data: [31, 29, 20, 16, 1, 3], label: "Composicion de la poblacion de nyc", backgroundColor: ["#F06EC4", "#AB72F7", "#7396E0", "#495F8F", "#8856a7", "#34147f"] }],
                    },
                    options: {
                        animation: false,
                        layout: {
                            padding: 10,
                        },
                    },
                });
                //victimas
                new Chart(document.getElementById("tercerCan").getContext("2d"), {
                    type: "bar",
                    data: {
                        labels: ["personas asiaticas", "personas negras", "mujeres", "personas musulmanes", "personas judias", "personas lgbt", "personas blancas", "Otros"],
                        datasets: [
                            {
                                data: [lesAapi, lesAfroamericanos, lesMujeres, lesMusulmanes, lesJudios, lesLGBT, lesBlancos, lesOtres],
                                label: "Grupos de personas atacadas",
                                backgroundColor: ["#728FCE", "#4863A0", "#2B547E", "#36454F", "#29465B", "#2B3856", "#123456", "#151B54"],
                            },
                        ],
                    },
                    options: {
                        animation: false,
                        layout: {
                            padding: 10,
                        },
                    },
                });
            }
            visualizacion().catch((error) => console.error(error));
        </script>

    </body>

           </html> 
